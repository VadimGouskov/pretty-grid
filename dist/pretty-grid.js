!function(t,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?exports.prettyGrid=n():t.prettyGrid=n()}(this,(function(){return(()=>{"use strict";var t={d:(n,r)=>{for(var o in r)t.o(r,o)&&!t.o(n,o)&&Object.defineProperty(n,o,{enumerable:!0,get:r[o]})},o:(t,n)=>Object.prototype.hasOwnProperty.call(t,n),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},n={};t.r(n),t.d(n,{Grid:()=>o,GridPoint:()=>r,and:()=>d,cols:()=>a,even:()=>e,evenCols:()=>u,evenRows:()=>c,odd:()=>i,oddCols:()=>f,oddRows:()=>s,or:()=>h,rows:()=>p});var r=function(t,n){this.x=t,this.y=n},o=function(){function t(t,n,o,e){this.points=[[]];for(var i=o/(t-1),u=e/(n-1),f=0;f<t;f++){this.points[f]=[];for(var c=0;c<n;c++)this.points[f][c]=new r(f*i,c*u)}}return Object.defineProperty(t.prototype,"flat",{get:function(){return this.points.reduce((function(t,n){return t.concat(n)}),[])},enumerable:!1,configurable:!0}),t.prototype.get=function(){return this.points},t.prototype.set=function(t){this.points=t},t.prototype.getPoint=function(t,n){return this.points[t][n]},t.prototype.draw=function(t,n){this.points.forEach((function(r,o){return r.forEach((function(r,e){n&&!n(r,o,e)||t(r)}))}))},t.prototype.translate=function(t,n,r){return this.points.forEach((function(o,e){return o.forEach((function(o,i){r&&!r(o,e,i)||(o.x+=t,o.y+=n)}))})),this},t.prototype.copy=function(){var n=new t(this.points.length,this.points[0].length,0,0),r=JSON.parse(JSON.stringify(this.points));return n.set(r),n},t}(),e=function(){return function(t,n,r){return n%2==0&&r%2==0}},i=function(){return function(t,n,r){return n%2!=0&&r%2!=0}},u=function(){return function(t,n,r){return n%2==0}},f=function(){return function(t,n,r){return n%2!=0}},c=function(){return function(t,n,r){return r%2==0}},s=function(){return function(t,n,r){return r%2!=0}},p=function(t,n){return function(r,o,e){return e>=t&&e<=n}},a=function(t,n){return function(r,o,e){return o>=t&&o<=n}},d=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return function(n,r,o){for(var e=0,i=t;e<i.length;e++)if(!(0,i[e])(n,r,o))return!1;return!0}},h=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return function(n,r,o){for(var e=0,i=t;e<i.length;e++)if((0,i[e])(n,r,o))return!0;return!1}};return n})()}));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicHJldHR5LWdyaWQuanMiLCJtYXBwaW5ncyI6IkNBQUEsU0FBMkNBLEVBQU1DLEdBQzFCLGlCQUFaQyxTQUEwQyxpQkFBWEMsT0FDeENBLE9BQU9ELFFBQVVELElBQ1EsbUJBQVhHLFFBQXlCQSxPQUFPQyxJQUM5Q0QsT0FBTyxHQUFJSCxHQUNlLGlCQUFaQyxRQUNkQSxRQUFvQixXQUFJRCxJQUV4QkQsRUFBaUIsV0FBSUMsSUFSdkIsQ0FTR0ssTUFBTSxXQUNULE0sbUJDVEEsSUFBSUMsRUFBc0IsQ0NBMUJBLEVBQXdCLENBQUNMLEVBQVNNLEtBQ2pDLElBQUksSUFBSUMsS0FBT0QsRUFDWEQsRUFBb0JHLEVBQUVGLEVBQVlDLEtBQVNGLEVBQW9CRyxFQUFFUixFQUFTTyxJQUM1RUUsT0FBT0MsZUFBZVYsRUFBU08sRUFBSyxDQUFFSSxZQUFZLEVBQU1DLElBQUtOLEVBQVdDLE1DSjNFRixFQUF3QixDQUFDUSxFQUFLQyxJQUFVTCxPQUFPTSxVQUFVQyxlQUFlQyxLQUFLSixFQUFLQyxHQ0NsRlQsRUFBeUJMLElBQ0gsb0JBQVhrQixRQUEwQkEsT0FBT0MsYUFDMUNWLE9BQU9DLGVBQWVWLEVBQVNrQixPQUFPQyxZQUFhLENBQUVDLE1BQU8sV0FFN0RYLE9BQU9DLGVBQWVWLEVBQVMsYUFBYyxDQUFFb0IsT0FBTyxNLHdLQ0R2RCxNQUdJLFNBQVlDLEVBQVdDLEdBQ25CbEIsS0FBS2lCLEVBQUlBLEVBQ1RqQixLQUFLa0IsRUFBSUEsR0FJakIsYUFhSSxXQUFZQyxFQUFjQyxFQUFjQyxFQUFlQyxHQVovQyxLQUFBQyxPQUF3QixDQUFDLElBaUI3QixJQUpBLElBQU1DLEVBQVdILEdBQVNGLEVBQU8sR0FDM0JNLEVBQVdILEdBQVVGLEVBQU8sR0FHekJNLEVBQUksRUFBR0EsRUFBSVAsRUFBTU8sSUFBSyxDQUMzQjFCLEtBQUt1QixPQUFPRyxHQUFLLEdBQ2pCLElBQUssSUFBSUMsRUFBSSxFQUFHQSxFQUFJUCxFQUFNTyxJQUN0QjNCLEtBQUt1QixPQUFPRyxHQUFHQyxHQUFLLElBQUlDLEVBQVVGLEVBQUlGLEVBQVVHLEVBQUlGLElBNEZwRSxPQXZGSSxzQkFBSSxtQkFBSSxDLElBQVIsV0FDSSxPQUFPekIsS0FBS3VCLE9BQU9NLFFBQU8sU0FBQ0MsRUFBS0MsR0FBUSxPQUFBRCxFQUFJRSxPQUFPRCxLQUFNLEssZ0NBVTdELFlBQUF2QixJQUFBLFdBQ0ksT0FBT1IsS0FBS3VCLFFBUWhCLFlBQUFVLElBQUEsU0FBSVYsR0FDQXZCLEtBQUt1QixPQUFTQSxHQVNsQixZQUFBVyxTQUFBLFNBQVNDLEVBQWFDLEdBQ2xCLE9BQU9wQyxLQUFLdUIsT0FBT1ksR0FBS0MsSUFRNUIsWUFBQUMsS0FBQSxTQUFLQyxFQUFvQkMsR0FDckJ2QyxLQUFLdUIsT0FBT2lCLFNBQVEsU0FBQ0wsRUFBS00sR0FDdEIsT0FBQU4sRUFBSUssU0FBUSxTQUFDRSxFQUFPQyxHQUNWSixJQUFjQSxFQUFVRyxFQUFPRCxFQUFVRSxJQUMvQ0wsRUFBS0ksVUFVakIsWUFBQUUsVUFBQSxTQUFVM0IsRUFBV0MsRUFBV3FCLEdBUTVCLE9BUEF2QyxLQUFLdUIsT0FBT2lCLFNBQVEsU0FBQ0wsRUFBS00sR0FDdEIsT0FBQU4sRUFBSUssU0FBUSxTQUFDRSxFQUFPQyxHQUNWSixJQUFjQSxFQUFVRyxFQUFPRCxFQUFVRSxLQUMvQ0QsRUFBTXpCLEdBQUtBLEVBQ1h5QixFQUFNeEIsR0FBS0EsU0FHWmxCLE1BS1gsWUFBQTZDLEtBQUEsV0FDSSxJQUtNQyxFQUFhLElBQUlDLEVBTFYvQyxLQUFLdUIsT0FBT3lCLE9BRVpoRCxLQUFLdUIsT0FBTyxHQUFHeUIsT0FHWSxFQUFHLEdBQ3JDQyxFQUFnQ0MsS0FBS0MsTUFBTUQsS0FBS0UsVUFBVXBELEtBQUt1QixTQUdyRSxPQUZBdUIsRUFBV2IsSUFBSWdCLEdBRVJILEdBV2YsRUFqSEEsR0NMYU8sRUFBa0IsV0FBeUIsZ0JBQUNYLEVBQU9QLEVBQUtDLEdBQVEsT0FBQUQsRUFBTSxHQUFNLEdBQUtDLEVBQU0sR0FBTSxJQUU3RmtCLEVBQWlCLFdBQXlCLGdCQUFDWixFQUFPUCxFQUFLQyxHQUFRLE9BQUFELEVBQU0sR0FBTSxHQUFLQyxFQUFNLEdBQU0sSUFFNUZtQixFQUFzQixXQUF5QixnQkFBQ2IsRUFBT1AsRUFBS0MsR0FBUSxPQUFBRCxFQUFNLEdBQU0sSUFFaEZxQixFQUFxQixXQUF5QixnQkFBQ2QsRUFBT1AsRUFBS0MsR0FBUSxPQUFBRCxFQUFNLEdBQU0sSUFFL0VzQixFQUFzQixXQUF5QixnQkFBQ2YsRUFBT1AsRUFBS0MsR0FBUSxPQUFBQSxFQUFNLEdBQU0sSUFFaEZzQixFQUFxQixXQUF5QixnQkFBQ2hCLEVBQU9QLEVBQUtDLEdBQVEsT0FBQUEsRUFBTSxHQUFNLElBRS9FaEIsRUFDVCxTQUFDdUMsRUFBZUMsR0FDaEIsZ0JBQUNsQixFQUFPUCxFQUFLQyxHQUNULE9BQU9BLEdBQU91QixHQUFTdkIsR0FBT3dCLElBR3pCekMsRUFDVCxTQUFDd0MsRUFBZUMsR0FDaEIsZ0JBQUNsQixFQUFPUCxFQUFLQyxHQUNULE9BQU9ELEdBQU93QixHQUFTeEIsR0FBT3lCLElDekJ6QkMsRUFBZ0IsVyxJQUFDLHNEQUMxQixPQUFPLFNBQUNuQixFQUFPUCxFQUFLQyxHQUNoQixJQUFzQixVQUFBMEIsRUFBQSxlQUNsQixLQUFLdkIsRUFEUyxNQUNDRyxFQUFPUCxFQUFLQyxHQUFNLE9BQU8sRUFFNUMsT0FBTyxJQUlGMkIsRUFBZSxXLElBQUMsc0RBQ3pCLE9BQU8sU0FBQ3JCLEVBQU9QLEVBQUtDLEdBQ2hCLElBQXNCLFVBQUEwQixFQUFBLGVBQ2xCLElBQUl2QixFQURVLE1BQ0FHLEVBQU9QLEVBQUtDLEdBQU0sT0FBTyxFQUUzQyxPQUFPLEkiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wcmV0dHlHcmlkL3dlYnBhY2svdW5pdmVyc2FsTW9kdWxlRGVmaW5pdGlvbiIsIndlYnBhY2s6Ly9wcmV0dHlHcmlkL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL3ByZXR0eUdyaWQvd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzIiwid2VicGFjazovL3ByZXR0eUdyaWQvd2VicGFjay9ydW50aW1lL2hhc093blByb3BlcnR5IHNob3J0aGFuZCIsIndlYnBhY2s6Ly9wcmV0dHlHcmlkL3dlYnBhY2svcnVudGltZS9tYWtlIG5hbWVzcGFjZSBvYmplY3QiLCJ3ZWJwYWNrOi8vcHJldHR5R3JpZC8uL3NyYy9ncmlkLnRzIiwid2VicGFjazovL3ByZXR0eUdyaWQvLi9zcmMvY29uZGl0aW9ucy50cyIsIndlYnBhY2s6Ly9wcmV0dHlHcmlkLy4vc3JjL29wZXJhdG9ycy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gd2VicGFja1VuaXZlcnNhbE1vZHVsZURlZmluaXRpb24ocm9vdCwgZmFjdG9yeSkge1xuXHRpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG1vZHVsZSA9PT0gJ29iamVjdCcpXG5cdFx0bW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KCk7XG5cdGVsc2UgaWYodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKVxuXHRcdGRlZmluZShbXSwgZmFjdG9yeSk7XG5cdGVsc2UgaWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnKVxuXHRcdGV4cG9ydHNbXCJwcmV0dHlHcmlkXCJdID0gZmFjdG9yeSgpO1xuXHRlbHNlXG5cdFx0cm9vdFtcInByZXR0eUdyaWRcIl0gPSBmYWN0b3J5KCk7XG59KSh0aGlzLCBmdW5jdGlvbigpIHtcbnJldHVybiAiLCIvLyBUaGUgcmVxdWlyZSBzY29wZVxudmFyIF9fd2VicGFja19yZXF1aXJlX18gPSB7fTtcblxuIiwiLy8gZGVmaW5lIGdldHRlciBmdW5jdGlvbnMgZm9yIGhhcm1vbnkgZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5kID0gKGV4cG9ydHMsIGRlZmluaXRpb24pID0+IHtcblx0Zm9yKHZhciBrZXkgaW4gZGVmaW5pdGlvbikge1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhkZWZpbml0aW9uLCBrZXkpICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywga2V5KSkge1xuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGRlZmluaXRpb25ba2V5XSB9KTtcblx0XHR9XG5cdH1cbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gKG9iaiwgcHJvcCkgPT4gKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApKSIsIi8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uciA9IChleHBvcnRzKSA9PiB7XG5cdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuXHR9XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG59OyIsImltcG9ydCB7IENvbmRpdGlvbiwgQ29uZGl0aW9uRnVuY3Rpb24gfSBmcm9tICcuL2NvbmRpdGlvbnMnO1xuXG5leHBvcnQgdHlwZSBHcmlkRnVuY3Rpb24gPSAocG9pbnQ6IEdyaWRQb2ludCwgY29sPzogbnVtYmVyLCByb3c/OiBudW1iZXIpID0+IHZvaWQ7XG5cbmV4cG9ydCBjbGFzcyBHcmlkUG9pbnQge1xuICAgIHg6IG51bWJlcjtcbiAgICB5OiBudW1iZXI7XG4gICAgY29uc3RydWN0b3IoeDogbnVtYmVyLCB5OiBudW1iZXIpIHtcbiAgICAgICAgdGhpcy54ID0geDtcbiAgICAgICAgdGhpcy55ID0geTtcbiAgICB9XG59XG5cbmV4cG9ydCBjbGFzcyBHcmlkIHtcbiAgICBwcml2YXRlIHBvaW50czogR3JpZFBvaW50W11bXSA9IFtbXV07XG5cbiAgICAvKipcbiAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgKiBJbnN0YW50aWF0ZXMgYSBuZXcgMiBEaW1lbnNpb25hbCBHcmlkLlxuICAgICAqIFRoZSBob3Jpem9udGFsIGRpc3RhbmNlIGJldHdlZW4gZWFjaCBjb2x1bW46IHdpZHRoIC8gKGNvbHMgLSAxKVxuICAgICAqIFRoZSB2ZXJ0aWNhbCBkaXN0YW5jZSBiZXR3ZWVuIGVhY2ggcm93IDogaGVpZ2h0IC8gKHJvd3MgLSAxKVxuICAgICAqIEBwYXJhbSBjb2xzXG4gICAgICogQHBhcmFtIHJvd3NcbiAgICAgKiBAcGFyYW0gd2lkdGhcbiAgICAgKiBAcGFyYW0gaGVpZ2h0XG4gICAgICovXG4gICAgY29uc3RydWN0b3IoY29sczogbnVtYmVyLCByb3dzOiBudW1iZXIsIHdpZHRoOiBudW1iZXIsIGhlaWdodDogbnVtYmVyKSB7XG4gICAgICAgIGNvbnN0IHN0ZXBDb2xzID0gd2lkdGggLyAoY29scyAtIDEpO1xuICAgICAgICBjb25zdCBzdGVwUm93cyA9IGhlaWdodCAvIChyb3dzIC0gMSk7XG5cbiAgICAgICAgLy8gaW5pdGlhbGl6ZSBncmlkXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY29sczsgaSsrKSB7XG4gICAgICAgICAgICB0aGlzLnBvaW50c1tpXSA9IFtdO1xuICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCByb3dzOyBqKyspIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBvaW50c1tpXVtqXSA9IG5ldyBHcmlkUG9pbnQoaSAqIHN0ZXBDb2xzLCBqICogc3RlcFJvd3MpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgZ2V0IGZsYXQoKTogR3JpZFBvaW50W10ge1xuICAgICAgICByZXR1cm4gdGhpcy5wb2ludHMucmVkdWNlKChhY2MsIHZhbCkgPT4gYWNjLmNvbmNhdCh2YWwpLCBbXSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQG1ldGhvZFxuICAgICAqIEBuYW1lIGdldFxuICAgICAqIEdldCBhbGwgdGhlIGN1cnJlbnQgcG9pbnRzIG9uIHRoZSBncmlkXG4gICAgICogd2FybmluZzogZ2V0cyB0aGUgcG9pbnRzIGFycmF5IGJ5IHJlZmVyZW5jZS4gQ2hhbmdlcyB0byBpbmRpdmlkdWFsIHBvaW50cyB3aWxsIGJlIHJlZmxlY3RlZCBpbiB0aGUgb3JpZ2luYWwgZ3JpZCBvYmplY3QuXG4gICAgICogVG8gZ2V0IGEgZGVlcCBjb3B5IHVzZSBncmlkLmNvcHkoKS4gZWcuIGdyaWQuY29weS5nZXQoKVxuICAgICAqL1xuICAgIGdldCgpOiBHcmlkUG9pbnRbXVtdIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucG9pbnRzO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldCAvIHJlcGxhY2UgYWxsIHRoZSBjdXJyZW50IHBvaW50cyBvbiB0aGUgZ3JpZFxuICAgICAqIHdhcm5pbmc6IHNldHMgYSByZWZlcmVuY2UgdG8gdGhlIHByb3ZpZGVkIHBvaW50cy4gQ2hhbmdlcyBpbiBtYWRlIGJ5IHRoaXMgZ3JpZCBvYmplY3QgdG8gdGhlIHBvaW50cyB3aWxsIGJlIHJlZmxlY3RlZCBpbiB0aGUgcHJvdmlkZWQgcG9pbnRzIGFycmF5LlxuICAgICAqL1xuICAgIC8vIFRPRE8gc2V0IGEgZGVlcCBjb3B5IG1ha2VzIG1vcmUgc2VuY2U/IG9yIG1ha2UgaXQgb3B0aW9uYWwgYW5kIHByb3ZpZGUgYSBkZWVwIGNvcHkgaGVscGVyIGZ1bmN0aW9uXG4gICAgc2V0KHBvaW50czogR3JpZFBvaW50W11bXSk6IHZvaWQge1xuICAgICAgICB0aGlzLnBvaW50cyA9IHBvaW50cztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXRzIGEgcG9pbnQgZnJvbSBmcm9tIGluZGVjZXMgW2NvbCwgcm93XVxuICAgICAqIEBwYXJhbSBjb2xcbiAgICAgKiBAcGFyYW0gcm93XG4gICAgICovXG5cbiAgICBnZXRQb2ludChjb2w6IG51bWJlciwgcm93OiBudW1iZXIpOiBHcmlkUG9pbnQge1xuICAgICAgICByZXR1cm4gdGhpcy5wb2ludHNbY29sXVtyb3ddO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIExvb3BzIG92ZXIgdGhlIHBvaW50cyBpbiB0aGUgZ3JpZCwgcGFzc2luZyBlYWNoIHBvaW50IHRvIHRoZSBwcm92aWRlZCBAcGFyYW0gZnVuY1xuICAgICAqIFByb3ZpZGUgYSBkcmF3aW5nIGZ1bmN0aW9uXG4gICAgICogQHBhcmFtIGZ1bmMgYSBmdW5jdGlvbiB0aGF0IGhhbmRsZXMgZHJhd2luZyBvZiBlYWNoIGluZGl2aWR1YWwgcG9pbnRcbiAgICAgKi9cbiAgICBkcmF3KGZ1bmM6IEdyaWRGdW5jdGlvbiwgY29uZGl0aW9uPzogQ29uZGl0aW9uRnVuY3Rpb24pOiB2b2lkIHtcbiAgICAgICAgdGhpcy5wb2ludHMuZm9yRWFjaCgoY29sLCBjb2xJbmRleCkgPT5cbiAgICAgICAgICAgIGNvbC5mb3JFYWNoKChwb2ludCwgcm93SW5kZXgpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoISFjb25kaXRpb24gJiYgIWNvbmRpdGlvbihwb2ludCwgY29sSW5kZXgsIHJvd0luZGV4KSkgcmV0dXJuO1xuICAgICAgICAgICAgICAgIGZ1bmMocG9pbnQpO1xuICAgICAgICAgICAgfSksXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVHJhbnNsYXRlcyB0aGUgZW50aXJlIGdyaWQgYnkgQHBhcmFtIHggZW4gQHBhcmFtIHkgY29vcmRpbmF0ZXNcbiAgICAgKiBAcGFyYW0geFxuICAgICAqIEBwYXJhbSB5XG4gICAgICovXG4gICAgdHJhbnNsYXRlKHg6IG51bWJlciwgeTogbnVtYmVyLCBjb25kaXRpb24/OiBDb25kaXRpb25GdW5jdGlvbik6IEdyaWQge1xuICAgICAgICB0aGlzLnBvaW50cy5mb3JFYWNoKChjb2wsIGNvbEluZGV4KSA9PlxuICAgICAgICAgICAgY29sLmZvckVhY2goKHBvaW50LCByb3dJbmRleCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICghIWNvbmRpdGlvbiAmJiAhY29uZGl0aW9uKHBvaW50LCBjb2xJbmRleCwgcm93SW5kZXgpKSByZXR1cm47XG4gICAgICAgICAgICAgICAgcG9pbnQueCArPSB4O1xuICAgICAgICAgICAgICAgIHBvaW50LnkgKz0geTtcbiAgICAgICAgICAgIH0pLFxuICAgICAgICApO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICAvKiogQ3JlYXRlcyBhIGRlZXAgY29weSBvZiB0aGUgY3VycmVudCBncmlkIG9iamVjdFxuICAgICAqL1xuICAgIGNvcHkoKTogR3JpZCB7XG4gICAgICAgIGNvbnN0IGNvbHMgPSB0aGlzLnBvaW50cy5sZW5ndGg7XG4gICAgICAgIC8vIFRPRE8gdGFrZSBpbnRvIGFjY291bnQgcG9zaWJpbGl0eSBvZiBtb2RpZmllZCByb3dcbiAgICAgICAgY29uc3Qgcm93cyA9IHRoaXMucG9pbnRzWzBdLmxlbmd0aDtcblxuICAgICAgICAvLyBXaWR0aCBhbmQgaGVpZ2h0IG9mIGdyaWQgZG8gbm90IG1hdHRlciwgdGhlc2Ugd2lsbCBnZXQgc2V0XG4gICAgICAgIGNvbnN0IGNvcGllZEdyaWQgPSBuZXcgR3JpZChjb2xzLCByb3dzLCAwLCAwKTtcbiAgICAgICAgY29uc3QgcG9pbnRzRGVlcENvcHk6IEdyaWRQb2ludFtdW10gPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHRoaXMucG9pbnRzKSk7XG4gICAgICAgIGNvcGllZEdyaWQuc2V0KHBvaW50c0RlZXBDb3B5KTtcblxuICAgICAgICByZXR1cm4gY29waWVkR3JpZDtcbiAgICB9XG5cbiAgICAvKiBcbiAgICBnZXRTZWN0aW9uKHN0YXJ0Q29sOiBudW1iZXIsIGVuZENvbDogbnVtYmVyLCBzdGFydFJvdzogbnVtYmVyLCBlbmRSb3c6IG51bWJlcik6IEdyaWQge1xuICAgICAgICBjb25zdCBzbGljZSA9IHRoaXMucG9pbnRzLnNsaWNlKHN0YXJ0Q29sLCBlbmRDb2wgKyAxKS5tYXAoKGkpID0+IGkuc2xpY2Uoc3RhcnRSb3csIGVuZFJvdyArIDEpKTtcbiAgICAgICAgY29uc3QgZ3JpZEZyb21TbGljZSA9IG5ldyBHcmlkKHNsaWNlWzBdLmxlbmd0aCwgc2xpY2UubGVuZ3RoLCAwLCAwKTtcbiAgICAgICAgZ3JpZEZyb21TbGljZS5zZXQoc2xpY2UpO1xuICAgICAgICByZXR1cm4gZ3JpZEZyb21TbGljZTtcbiAgICB9XG4gICAgKi9cbn1cbiIsImltcG9ydCB7IEdyaWRQb2ludCB9IGZyb20gJy4vZ3JpZCc7XG5cbmV4cG9ydCB0eXBlIENvbmRpdGlvbkZ1bmN0aW9uID0gKHBvaW50OiBHcmlkUG9pbnQsIGNvbD86IG51bWJlciwgcm93PzogbnVtYmVyKSA9PiBib29sZWFuO1xuXG5leHBvcnQgdHlwZSBDb25kaXRpb24gPSAoLi4uYXJnczogYW55W10pID0+IENvbmRpdGlvbkZ1bmN0aW9uO1xuXG5leHBvcnQgY29uc3QgYWxsOiBDb25kaXRpb24gPSAoKTogQ29uZGl0aW9uRnVuY3Rpb24gPT4gKHBvaW50LCBjb2wsIHJvdykgPT4gdHJ1ZTtcblxuZXhwb3J0IGNvbnN0IGV2ZW46IENvbmRpdGlvbiA9ICgpOiBDb25kaXRpb25GdW5jdGlvbiA9PiAocG9pbnQsIGNvbCwgcm93KSA9PiBjb2wgJSAyID09PSAwICYmIHJvdyAlIDIgPT09IDA7XG5cbmV4cG9ydCBjb25zdCBvZGQ6IENvbmRpdGlvbiA9ICgpOiBDb25kaXRpb25GdW5jdGlvbiA9PiAocG9pbnQsIGNvbCwgcm93KSA9PiBjb2wgJSAyICE9PSAwICYmIHJvdyAlIDIgIT09IDA7XG5cbmV4cG9ydCBjb25zdCBldmVuQ29sczogQ29uZGl0aW9uID0gKCk6IENvbmRpdGlvbkZ1bmN0aW9uID0+IChwb2ludCwgY29sLCByb3cpID0+IGNvbCAlIDIgPT09IDA7XG5cbmV4cG9ydCBjb25zdCBvZGRDb2xzOiBDb25kaXRpb24gPSAoKTogQ29uZGl0aW9uRnVuY3Rpb24gPT4gKHBvaW50LCBjb2wsIHJvdykgPT4gY29sICUgMiAhPT0gMDtcblxuZXhwb3J0IGNvbnN0IGV2ZW5Sb3dzOiBDb25kaXRpb24gPSAoKTogQ29uZGl0aW9uRnVuY3Rpb24gPT4gKHBvaW50LCBjb2wsIHJvdykgPT4gcm93ICUgMiA9PT0gMDtcblxuZXhwb3J0IGNvbnN0IG9kZFJvd3M6IENvbmRpdGlvbiA9ICgpOiBDb25kaXRpb25GdW5jdGlvbiA9PiAocG9pbnQsIGNvbCwgcm93KSA9PiByb3cgJSAyICE9PSAwO1xuXG5leHBvcnQgY29uc3Qgcm93cyA9XG4gICAgKHN0YXJ0OiBudW1iZXIsIGVuZDogbnVtYmVyKTogQ29uZGl0aW9uRnVuY3Rpb24gPT5cbiAgICAocG9pbnQsIGNvbCwgcm93KSA9PiB7XG4gICAgICAgIHJldHVybiByb3cgPj0gc3RhcnQgJiYgcm93IDw9IGVuZDtcbiAgICB9O1xuXG5leHBvcnQgY29uc3QgY29scyA9XG4gICAgKHN0YXJ0OiBudW1iZXIsIGVuZDogbnVtYmVyKTogQ29uZGl0aW9uRnVuY3Rpb24gPT5cbiAgICAocG9pbnQsIGNvbCwgcm93KSA9PiB7XG4gICAgICAgIHJldHVybiBjb2wgPj0gc3RhcnQgJiYgY29sIDw9IGVuZDtcbiAgICB9O1xuIiwiaW1wb3J0IHsgQ29uZGl0aW9uRnVuY3Rpb24gfSBmcm9tICcuL2NvbmRpdGlvbnMnO1xuXG5leHBvcnQgdHlwZSBPcGVyYXRvciA9ICguLi5jb25kaXRpb25zOiBDb25kaXRpb25GdW5jdGlvbltdKSA9PiBDb25kaXRpb25GdW5jdGlvbjtcblxuZXhwb3J0IGNvbnN0IGFuZDogT3BlcmF0b3IgPSAoLi4uY29uZGl0aW9uczogQ29uZGl0aW9uRnVuY3Rpb25bXSkgPT4ge1xuICAgIHJldHVybiAocG9pbnQsIGNvbCwgcm93KSA9PiB7XG4gICAgICAgIGZvciAobGV0IGNvbmRpdGlvbiBvZiBjb25kaXRpb25zKSB7XG4gICAgICAgICAgICBpZiAoIWNvbmRpdGlvbihwb2ludCwgY29sLCByb3cpKSByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfTtcbn07XG5cbmV4cG9ydCBjb25zdCBvcjogT3BlcmF0b3IgPSAoLi4uY29uZGl0aW9uczogQ29uZGl0aW9uRnVuY3Rpb25bXSkgPT4ge1xuICAgIHJldHVybiAocG9pbnQsIGNvbCwgcm93KSA9PiB7XG4gICAgICAgIGZvciAobGV0IGNvbmRpdGlvbiBvZiBjb25kaXRpb25zKSB7XG4gICAgICAgICAgICBpZiAoY29uZGl0aW9uKHBvaW50LCBjb2wsIHJvdykpIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9O1xufTtcbiJdLCJuYW1lcyI6WyJyb290IiwiZmFjdG9yeSIsImV4cG9ydHMiLCJtb2R1bGUiLCJkZWZpbmUiLCJhbWQiLCJ0aGlzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsImRlZmluaXRpb24iLCJrZXkiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0Iiwib2JqIiwicHJvcCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ4IiwieSIsImNvbHMiLCJyb3dzIiwid2lkdGgiLCJoZWlnaHQiLCJwb2ludHMiLCJzdGVwQ29scyIsInN0ZXBSb3dzIiwiaSIsImoiLCJHcmlkUG9pbnQiLCJyZWR1Y2UiLCJhY2MiLCJ2YWwiLCJjb25jYXQiLCJzZXQiLCJnZXRQb2ludCIsImNvbCIsInJvdyIsImRyYXciLCJmdW5jIiwiY29uZGl0aW9uIiwiZm9yRWFjaCIsImNvbEluZGV4IiwicG9pbnQiLCJyb3dJbmRleCIsInRyYW5zbGF0ZSIsImNvcHkiLCJjb3BpZWRHcmlkIiwiR3JpZCIsImxlbmd0aCIsInBvaW50c0RlZXBDb3B5IiwiSlNPTiIsInBhcnNlIiwic3RyaW5naWZ5IiwiZXZlbiIsIm9kZCIsImV2ZW5Db2xzIiwib2RkQ29scyIsImV2ZW5Sb3dzIiwib2RkUm93cyIsInN0YXJ0IiwiZW5kIiwiYW5kIiwiY29uZGl0aW9ucyIsIm9yIl0sInNvdXJjZVJvb3QiOiIifQ==