!function(t,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?exports.prettyGrid=n():t.prettyGrid=n()}(this,(function(){return(()=>{"use strict";var t={d:(n,r)=>{for(var o in r)t.o(r,o)&&!t.o(n,o)&&Object.defineProperty(n,o,{enumerable:!0,get:r[o]})},o:(t,n)=>Object.prototype.hasOwnProperty.call(t,n),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},n={};t.r(n),t.d(n,{Grid:()=>o,GridPoint:()=>r,and:()=>d,cols:()=>a,even:()=>e,evenCols:()=>u,evenRows:()=>c,odd:()=>i,oddCols:()=>f,oddRows:()=>s,or:()=>h,rows:()=>p});var r=function(t,n){this.x=t,this.y=n},o=function(){function t(t,n,o,e){this.points=[[]];for(var i=o/(t-1),u=e/(n-1),f=0;f<t;f++){this.points[f]=[];for(var c=0;c<n;c++)this.points[f][c]=new r(f*i,c*u)}}return Object.defineProperty(t.prototype,"flat",{get:function(){return this.points.reduce((function(t,n){return t.concat(n)}),[])},enumerable:!1,configurable:!0}),t.prototype.get=function(){return this.points},t.prototype.set=function(t){this.points=t},t.prototype.getPoint=function(t,n){return this.points[t][n]},t.prototype.draw=function(t,n){this.points.forEach((function(r,o){return r.forEach((function(r,e){n&&!n(r,o,e)||t(r)}))}))},t.prototype.translate=function(t,n,r){return this.points.forEach((function(o,e){return o.forEach((function(o,i){r&&!r(o,e,i)||(o.x+=t,o.y+=n)}))})),this},t.prototype.copy=function(){var n=new t(this.points.length,this.points[0].length,0,0),r=JSON.parse(JSON.stringify(this.points));return n.set(r),n},t}(),e=function(){return function(t,n,r){return n%2==0&&r%2==0}},i=function(){return function(t,n,r){return n%2!=0&&r%2!=0}},u=function(){return function(t,n,r){return n%2==0}},f=function(){return function(t,n,r){return n%2!=0}},c=function(){return function(t,n,r){return r%2==0}},s=function(){return function(t,n,r){return r%2!=0}},p=function(t,n){return function(r,o,e){return e>=t&&e<=n}},a=function(t,n){return function(r,o,e){return o>=t&&o<=n}},d=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return function(n,r,o){for(var e=0,i=t;e<i.length;e++)if(!(0,i[e])(n,r,o))return!1;return!0}},h=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return function(n,r,o){for(var e=0,i=t;e<i.length;e++)if((0,i[e])(n,r,o))return!0;return!1}};return n})()}));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QXlCLGdCQUFDWixFQUFPUCxFQUFLQyxHQUFRLE9BQUFELEVBQU0sR0FBTSxHQUFLQyxFQUFNLEdBQU0sSUFFNUZtQixFQUFzQixXQUF5QixnQkFBQ2IsRUFBT1AsRUFBS0MsR0FBUSxPQUFBRCxFQUFNLEdBQU0sSUFFaEZxQixFQUFxQixXQUF5QixnQkFBQ2QsRUFBT1AsRUFBS0MsR0FBUSxPQUFBRCxFQUFNLEdBQU0sSUFFL0VzQixFQUFzQixXQUF5QixnQkFBQ2YsRUFBT1AsRUFBS0MsR0FBUSxPQUFBQSxFQUFNLEdBQU0sSUFFaEZzQixFQUFxQixXQUF5QixnQkFBQ2hCLEVBQU9QLEVBQUtDLEdBQVEsT0FBQUEsRUFBTSxHQUFNLElBRS9FaEIsRUFDVCxTQUFDdUMsRUFBZUMsR0FDaEIsZ0JBQUNsQixFQUFPUCxFQUFLQyxHQUNULE9BQU9BLEdBQU91QixHQUFTdkIsR0FBT3dCLElBR3pCekMsRUFDVCxTQUFDd0MsRUFBZUMsR0FDaEIsZ0JBQUNsQixFQUFPUCxFQUFLQyxHQUNULE9BQU9ELEdBQU93QixHQUFTeEIsR0FBT3lCLElDekJ6QkMsRUFBZ0IsVyxJQUFDLHNEQUMxQixPQUFPLFNBQUNuQixFQUFPUCxFQUFLQyxHQUNoQixJQUFzQixVQUFBMEIsRUFBQSxlQUNsQixLQUFLdkIsRUFEUyxNQUNDRyxFQUFPUCxFQUFLQyxHQUFNLE9BQU8sRUFFNUMsT0FBTyxJQUlGMkIsRUFBZSxXLElBQUMsc0RBQ3pCLE9BQU8sU0FBQ3JCLEVBQU9QLEVBQUtDLEdBQ2hCLElBQXNCLFVBQUEwQixFQUFBLGVBQ2xCLElBQUl2QixFQURVLE1BQ0FHLEVBQU9QLEVBQUtDLEdBQU0sT0FBTyxFQUUzQyxPQUFPLEkiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wcmV0dHlHcmlkL3dlYnBhY2svdW5pdmVyc2FsTW9kdWxlRGVmaW5pdGlvbiIsIndlYnBhY2s6Ly9wcmV0dHlHcmlkL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL3ByZXR0eUdyaWQvd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzIiwid2VicGFjazovL3ByZXR0eUdyaWQvd2VicGFjay9ydW50aW1lL2hhc093blByb3BlcnR5IHNob3J0aGFuZCIsIndlYnBhY2s6Ly9wcmV0dHlHcmlkL3dlYnBhY2svcnVudGltZS9tYWtlIG5hbWVzcGFjZSBvYmplY3QiLCJ3ZWJwYWNrOi8vcHJldHR5R3JpZC8uL3NyYy9ncmlkLnRzIiwid2VicGFjazovL3ByZXR0eUdyaWQvLi9zcmMvY29uZGl0aW9ucy50cyIsIndlYnBhY2s6Ly9wcmV0dHlHcmlkLy4vc3JjL29wZXJhdG9ycy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gd2VicGFja1VuaXZlcnNhbE1vZHVsZURlZmluaXRpb24ocm9vdCwgZmFjdG9yeSkge1xuXHRpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG1vZHVsZSA9PT0gJ29iamVjdCcpXG5cdFx0bW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KCk7XG5cdGVsc2UgaWYodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKVxuXHRcdGRlZmluZShbXSwgZmFjdG9yeSk7XG5cdGVsc2UgaWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnKVxuXHRcdGV4cG9ydHNbXCJwcmV0dHlHcmlkXCJdID0gZmFjdG9yeSgpO1xuXHRlbHNlXG5cdFx0cm9vdFtcInByZXR0eUdyaWRcIl0gPSBmYWN0b3J5KCk7XG59KSh0aGlzLCBmdW5jdGlvbigpIHtcbnJldHVybiAiLCIvLyBUaGUgcmVxdWlyZSBzY29wZVxudmFyIF9fd2VicGFja19yZXF1aXJlX18gPSB7fTtcblxuIiwiLy8gZGVmaW5lIGdldHRlciBmdW5jdGlvbnMgZm9yIGhhcm1vbnkgZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5kID0gKGV4cG9ydHMsIGRlZmluaXRpb24pID0+IHtcblx0Zm9yKHZhciBrZXkgaW4gZGVmaW5pdGlvbikge1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhkZWZpbml0aW9uLCBrZXkpICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywga2V5KSkge1xuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGRlZmluaXRpb25ba2V5XSB9KTtcblx0XHR9XG5cdH1cbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gKG9iaiwgcHJvcCkgPT4gKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApKSIsIi8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uciA9IChleHBvcnRzKSA9PiB7XG5cdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuXHR9XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG59OyIsImltcG9ydCB7IENvbmRpdGlvbiwgQ29uZGl0aW9uRnVuY3Rpb24gfSBmcm9tICcuL2NvbmRpdGlvbnMnO1xuXG5leHBvcnQgdHlwZSBHcmlkRnVuY3Rpb24gPSAocG9pbnQ6IEdyaWRQb2ludCwgY29sPzogbnVtYmVyLCByb3c/OiBudW1iZXIpID0+IHZvaWQ7XG5cbmV4cG9ydCBjbGFzcyBHcmlkUG9pbnQge1xuICAgIHg6IG51bWJlcjtcbiAgICB5OiBudW1iZXI7XG4gICAgY29uc3RydWN0b3IoeDogbnVtYmVyLCB5OiBudW1iZXIpIHtcbiAgICAgICAgdGhpcy54ID0geDtcbiAgICAgICAgdGhpcy55ID0geTtcbiAgICB9XG59XG5cbmV4cG9ydCBjbGFzcyBHcmlkIHtcbiAgICBwcml2YXRlIHBvaW50czogR3JpZFBvaW50W11bXSA9IFtbXV07XG5cbiAgICAvKipcbiAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgKiBJbnN0YW50aWF0ZXMgYSBuZXcgMiBEaW1lbnNpb25hbCBHcmlkLlxuICAgICAqIFRoZSBob3Jpem9udGFsIGRpc3RhbmNlIGJldHdlZW4gZWFjaCBjb2x1bW46IHdpZHRoIC8gKGNvbHMgLSAxKVxuICAgICAqIFRoZSB2ZXJ0aWNhbCBkaXN0YW5jZSBiZXR3ZWVuIGVhY2ggcm93IDogaGVpZ2h0IC8gKHJvd3MgLSAxKVxuICAgICAqIEBwYXJhbSBjb2xzXG4gICAgICogQHBhcmFtIHJvd3NcbiAgICAgKiBAcGFyYW0gd2lkdGhcbiAgICAgKiBAcGFyYW0gaGVpZ2h0XG4gICAgICovXG4gICAgY29uc3RydWN0b3IoY29sczogbnVtYmVyLCByb3dzOiBudW1iZXIsIHdpZHRoOiBudW1iZXIsIGhlaWdodDogbnVtYmVyKSB7XG4gICAgICAgIGNvbnN0IHN0ZXBDb2xzID0gd2lkdGggLyAoY29scyAtIDEpO1xuICAgICAgICBjb25zdCBzdGVwUm93cyA9IGhlaWdodCAvIChyb3dzIC0gMSk7XG5cbiAgICAgICAgLy8gaW5pdGlhbGl6ZSBncmlkXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY29sczsgaSsrKSB7XG4gICAgICAgICAgICB0aGlzLnBvaW50c1tpXSA9IFtdO1xuICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCByb3dzOyBqKyspIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBvaW50c1tpXVtqXSA9IG5ldyBHcmlkUG9pbnQoaSAqIHN0ZXBDb2xzLCBqICogc3RlcFJvd3MpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgZ2V0IGZsYXQoKTogR3JpZFBvaW50W10ge1xuICAgICAgICByZXR1cm4gdGhpcy5wb2ludHMucmVkdWNlKChhY2MsIHZhbCkgPT4gYWNjLmNvbmNhdCh2YWwpLCBbXSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0IGFsbCB0aGUgY3VycmVudCBwb2ludHMgb24gdGhlIGdyaWRcbiAgICAgKiB3YXJuaW5nOiBnZXRzIHRoZSBwb2ludHMgYXJyYXkgYnkgcmVmZXJlbmNlLiBDaGFuZ2VzIHRvIGluZGl2aWR1YWwgcG9pbnRzIHdpbGwgYmUgcmVmbGVjdGVkIGluIHRoZSBvcmlnaW5hbCBncmlkIG9iamVjdC5cbiAgICAgKiBUbyBnZXQgYSBkZWVwIGNvcHkgdXNlIGdyaWQuY29weSgpLiBlZy4gZ3JpZC5jb3B5LmdldCgpXG4gICAgICovXG4gICAgZ2V0KCk6IEdyaWRQb2ludFtdW10ge1xuICAgICAgICByZXR1cm4gdGhpcy5wb2ludHM7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0IC8gcmVwbGFjZSBhbGwgdGhlIGN1cnJlbnQgcG9pbnRzIG9uIHRoZSBncmlkXG4gICAgICogd2FybmluZzogc2V0cyBhIHJlZmVyZW5jZSB0byB0aGUgcHJvdmlkZWQgcG9pbnRzLiBDaGFuZ2VzIGluIG1hZGUgYnkgdGhpcyBncmlkIG9iamVjdCB0byB0aGUgcG9pbnRzIHdpbGwgYmUgcmVmbGVjdGVkIGluIHRoZSBwcm92aWRlZCBwb2ludHMgYXJyYXkuXG4gICAgICovXG4gICAgLy8gVE9ETyBzZXQgYSBkZWVwIGNvcHkgbWFrZXMgbW9yZSBzZW5jZT8gb3IgbWFrZSBpdCBvcHRpb25hbCBhbmQgcHJvdmlkZSBhIGRlZXAgY29weSBoZWxwZXIgZnVuY3Rpb25cbiAgICBzZXQocG9pbnRzOiBHcmlkUG9pbnRbXVtdKTogdm9pZCB7XG4gICAgICAgIHRoaXMucG9pbnRzID0gcG9pbnRzO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldHMgYSBwb2ludCBmcm9tIGZyb20gaW5kZWNlcyBbY29sLCByb3ddXG4gICAgICogQHBhcmFtIGNvbFxuICAgICAqIEBwYXJhbSByb3dcbiAgICAgKi9cblxuICAgIGdldFBvaW50KGNvbDogbnVtYmVyLCByb3c6IG51bWJlcik6IEdyaWRQb2ludCB7XG4gICAgICAgIHJldHVybiB0aGlzLnBvaW50c1tjb2xdW3Jvd107XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogTG9vcHMgb3ZlciB0aGUgcG9pbnRzIGluIHRoZSBncmlkLCBwYXNzaW5nIGVhY2ggcG9pbnQgdG8gdGhlIHByb3ZpZGVkIEBwYXJhbSBmdW5jXG4gICAgICogUHJvdmlkZSBhIGRyYXdpbmcgZnVuY3Rpb25cbiAgICAgKiBAcGFyYW0gZnVuYyBhIGZ1bmN0aW9uIHRoYXQgaGFuZGxlcyBkcmF3aW5nIG9mIGVhY2ggaW5kaXZpZHVhbCBwb2ludFxuICAgICAqL1xuICAgIGRyYXcoZnVuYzogR3JpZEZ1bmN0aW9uLCBjb25kaXRpb24/OiBDb25kaXRpb25GdW5jdGlvbik6IHZvaWQge1xuICAgICAgICB0aGlzLnBvaW50cy5mb3JFYWNoKChjb2wsIGNvbEluZGV4KSA9PlxuICAgICAgICAgICAgY29sLmZvckVhY2goKHBvaW50LCByb3dJbmRleCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICghIWNvbmRpdGlvbiAmJiAhY29uZGl0aW9uKHBvaW50LCBjb2xJbmRleCwgcm93SW5kZXgpKSByZXR1cm47XG4gICAgICAgICAgICAgICAgZnVuYyhwb2ludCk7XG4gICAgICAgICAgICB9KSxcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUcmFuc2xhdGVzIHRoZSBlbnRpcmUgZ3JpZCBieSBAcGFyYW0geCBlbiBAcGFyYW0geSBjb29yZGluYXRlc1xuICAgICAqIEBwYXJhbSB4XG4gICAgICogQHBhcmFtIHlcbiAgICAgKi9cbiAgICB0cmFuc2xhdGUoeDogbnVtYmVyLCB5OiBudW1iZXIsIGNvbmRpdGlvbj86IENvbmRpdGlvbkZ1bmN0aW9uKTogR3JpZCB7XG4gICAgICAgIHRoaXMucG9pbnRzLmZvckVhY2goKGNvbCwgY29sSW5kZXgpID0+XG4gICAgICAgICAgICBjb2wuZm9yRWFjaCgocG9pbnQsIHJvd0luZGV4KSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKCEhY29uZGl0aW9uICYmICFjb25kaXRpb24ocG9pbnQsIGNvbEluZGV4LCByb3dJbmRleCkpIHJldHVybjtcbiAgICAgICAgICAgICAgICBwb2ludC54ICs9IHg7XG4gICAgICAgICAgICAgICAgcG9pbnQueSArPSB5O1xuICAgICAgICAgICAgfSksXG4gICAgICAgICk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIC8qKiBDcmVhdGVzIGEgZGVlcCBjb3B5IG9mIHRoZSBjdXJyZW50IGdyaWQgb2JqZWN0XG4gICAgICovXG4gICAgY29weSgpOiBHcmlkIHtcbiAgICAgICAgY29uc3QgY29scyA9IHRoaXMucG9pbnRzLmxlbmd0aDtcbiAgICAgICAgLy8gVE9ETyB0YWtlIGludG8gYWNjb3VudCBwb3NpYmlsaXR5IG9mIG1vZGlmaWVkIHJvd1xuICAgICAgICBjb25zdCByb3dzID0gdGhpcy5wb2ludHNbMF0ubGVuZ3RoO1xuXG4gICAgICAgIC8vIFdpZHRoIGFuZCBoZWlnaHQgb2YgZ3JpZCBkbyBub3QgbWF0dGVyLCB0aGVzZSB3aWxsIGdldCBzZXRcbiAgICAgICAgY29uc3QgY29waWVkR3JpZCA9IG5ldyBHcmlkKGNvbHMsIHJvd3MsIDAsIDApO1xuICAgICAgICBjb25zdCBwb2ludHNEZWVwQ29weTogR3JpZFBvaW50W11bXSA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodGhpcy5wb2ludHMpKTtcbiAgICAgICAgY29waWVkR3JpZC5zZXQocG9pbnRzRGVlcENvcHkpO1xuXG4gICAgICAgIHJldHVybiBjb3BpZWRHcmlkO1xuICAgIH1cblxuICAgIC8qIFxuICAgIGdldFNlY3Rpb24oc3RhcnRDb2w6IG51bWJlciwgZW5kQ29sOiBudW1iZXIsIHN0YXJ0Um93OiBudW1iZXIsIGVuZFJvdzogbnVtYmVyKTogR3JpZCB7XG4gICAgICAgIGNvbnN0IHNsaWNlID0gdGhpcy5wb2ludHMuc2xpY2Uoc3RhcnRDb2wsIGVuZENvbCArIDEpLm1hcCgoaSkgPT4gaS5zbGljZShzdGFydFJvdywgZW5kUm93ICsgMSkpO1xuICAgICAgICBjb25zdCBncmlkRnJvbVNsaWNlID0gbmV3IEdyaWQoc2xpY2VbMF0ubGVuZ3RoLCBzbGljZS5sZW5ndGgsIDAsIDApO1xuICAgICAgICBncmlkRnJvbVNsaWNlLnNldChzbGljZSk7XG4gICAgICAgIHJldHVybiBncmlkRnJvbVNsaWNlO1xuICAgIH1cbiAgICAqL1xufVxuIiwiaW1wb3J0IHsgR3JpZFBvaW50IH0gZnJvbSAnLi9ncmlkJztcblxuZXhwb3J0IHR5cGUgQ29uZGl0aW9uRnVuY3Rpb24gPSAocG9pbnQ6IEdyaWRQb2ludCwgY29sPzogbnVtYmVyLCByb3c/OiBudW1iZXIpID0+IGJvb2xlYW47XG5cbmV4cG9ydCB0eXBlIENvbmRpdGlvbiA9ICguLi5hcmdzOiBhbnlbXSkgPT4gQ29uZGl0aW9uRnVuY3Rpb247XG5cbmV4cG9ydCBjb25zdCBhbGw6IENvbmRpdGlvbiA9ICgpOiBDb25kaXRpb25GdW5jdGlvbiA9PiAocG9pbnQsIGNvbCwgcm93KSA9PiB0cnVlO1xuXG5leHBvcnQgY29uc3QgZXZlbjogQ29uZGl0aW9uID0gKCk6IENvbmRpdGlvbkZ1bmN0aW9uID0+IChwb2ludCwgY29sLCByb3cpID0+IGNvbCAlIDIgPT09IDAgJiYgcm93ICUgMiA9PT0gMDtcblxuZXhwb3J0IGNvbnN0IG9kZDogQ29uZGl0aW9uID0gKCk6IENvbmRpdGlvbkZ1bmN0aW9uID0+IChwb2ludCwgY29sLCByb3cpID0+IGNvbCAlIDIgIT09IDAgJiYgcm93ICUgMiAhPT0gMDtcblxuZXhwb3J0IGNvbnN0IGV2ZW5Db2xzOiBDb25kaXRpb24gPSAoKTogQ29uZGl0aW9uRnVuY3Rpb24gPT4gKHBvaW50LCBjb2wsIHJvdykgPT4gY29sICUgMiA9PT0gMDtcblxuZXhwb3J0IGNvbnN0IG9kZENvbHM6IENvbmRpdGlvbiA9ICgpOiBDb25kaXRpb25GdW5jdGlvbiA9PiAocG9pbnQsIGNvbCwgcm93KSA9PiBjb2wgJSAyICE9PSAwO1xuXG5leHBvcnQgY29uc3QgZXZlblJvd3M6IENvbmRpdGlvbiA9ICgpOiBDb25kaXRpb25GdW5jdGlvbiA9PiAocG9pbnQsIGNvbCwgcm93KSA9PiByb3cgJSAyID09PSAwO1xuXG5leHBvcnQgY29uc3Qgb2RkUm93czogQ29uZGl0aW9uID0gKCk6IENvbmRpdGlvbkZ1bmN0aW9uID0+IChwb2ludCwgY29sLCByb3cpID0+IHJvdyAlIDIgIT09IDA7XG5cbmV4cG9ydCBjb25zdCByb3dzID1cbiAgICAoc3RhcnQ6IG51bWJlciwgZW5kOiBudW1iZXIpOiBDb25kaXRpb25GdW5jdGlvbiA9PlxuICAgIChwb2ludCwgY29sLCByb3cpID0+IHtcbiAgICAgICAgcmV0dXJuIHJvdyA+PSBzdGFydCAmJiByb3cgPD0gZW5kO1xuICAgIH07XG5cbmV4cG9ydCBjb25zdCBjb2xzID1cbiAgICAoc3RhcnQ6IG51bWJlciwgZW5kOiBudW1iZXIpOiBDb25kaXRpb25GdW5jdGlvbiA9PlxuICAgIChwb2ludCwgY29sLCByb3cpID0+IHtcbiAgICAgICAgcmV0dXJuIGNvbCA+PSBzdGFydCAmJiBjb2wgPD0gZW5kO1xuICAgIH07XG4iLCJpbXBvcnQgeyBDb25kaXRpb25GdW5jdGlvbiB9IGZyb20gJy4vY29uZGl0aW9ucyc7XG5cbmV4cG9ydCB0eXBlIE9wZXJhdG9yID0gKC4uLmNvbmRpdGlvbnM6IENvbmRpdGlvbkZ1bmN0aW9uW10pID0+IENvbmRpdGlvbkZ1bmN0aW9uO1xuXG5leHBvcnQgY29uc3QgYW5kOiBPcGVyYXRvciA9ICguLi5jb25kaXRpb25zOiBDb25kaXRpb25GdW5jdGlvbltdKSA9PiB7XG4gICAgcmV0dXJuIChwb2ludCwgY29sLCByb3cpID0+IHtcbiAgICAgICAgZm9yIChsZXQgY29uZGl0aW9uIG9mIGNvbmRpdGlvbnMpIHtcbiAgICAgICAgICAgIGlmICghY29uZGl0aW9uKHBvaW50LCBjb2wsIHJvdykpIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9O1xufTtcblxuZXhwb3J0IGNvbnN0IG9yOiBPcGVyYXRvciA9ICguLi5jb25kaXRpb25zOiBDb25kaXRpb25GdW5jdGlvbltdKSA9PiB7XG4gICAgcmV0dXJuIChwb2ludCwgY29sLCByb3cpID0+IHtcbiAgICAgICAgZm9yIChsZXQgY29uZGl0aW9uIG9mIGNvbmRpdGlvbnMpIHtcbiAgICAgICAgICAgIGlmIChjb25kaXRpb24ocG9pbnQsIGNvbCwgcm93KSkgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH07XG59O1xuIl0sIm5hbWVzIjpbInJvb3QiLCJmYWN0b3J5IiwiZXhwb3J0cyIsIm1vZHVsZSIsImRlZmluZSIsImFtZCIsInRoaXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwiZGVmaW5pdGlvbiIsImtleSIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJvYmoiLCJwcm9wIiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsIngiLCJ5IiwiY29scyIsInJvd3MiLCJ3aWR0aCIsImhlaWdodCIsInBvaW50cyIsInN0ZXBDb2xzIiwic3RlcFJvd3MiLCJpIiwiaiIsIkdyaWRQb2ludCIsInJlZHVjZSIsImFjYyIsInZhbCIsImNvbmNhdCIsInNldCIsImdldFBvaW50IiwiY29sIiwicm93IiwiZHJhdyIsImZ1bmMiLCJjb25kaXRpb24iLCJmb3JFYWNoIiwiY29sSW5kZXgiLCJwb2ludCIsInJvd0luZGV4IiwidHJhbnNsYXRlIiwiY29weSIsImNvcGllZEdyaWQiLCJHcmlkIiwibGVuZ3RoIiwicG9pbnRzRGVlcENvcHkiLCJKU09OIiwicGFyc2UiLCJzdHJpbmdpZnkiLCJldmVuIiwib2RkIiwiZXZlbkNvbHMiLCJvZGRDb2xzIiwiZXZlblJvd3MiLCJvZGRSb3dzIiwic3RhcnQiLCJlbmQiLCJhbmQiLCJjb25kaXRpb25zIiwib3IiXSwic291cmNlUm9vdCI6IiJ9