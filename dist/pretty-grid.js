!function(t,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?exports.prettyGrid=n():t.prettyGrid=n()}(this,(function(){return(()=>{"use strict";var t,n={d:(t,r)=>{for(var e in r)n.o(r,e)&&!n.o(t,e)&&Object.defineProperty(t,e,{enumerable:!0,get:r[e]})},o:(t,n)=>Object.prototype.hasOwnProperty.call(t,n),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},r={};n.r(r),n.d(r,{Grid:()=>f,GridPoint:()=>c,GridShape:()=>e,ShapeOrigin:()=>t,and:()=>g,cols:()=>E,ellipseShapeOrigin:()=>i,even:()=>s,evenCols:()=>a,evenRows:()=>h,not:()=>R,odd:()=>p,oddCols:()=>l,oddRows:()=>d,or:()=>v,rectangleShapeOrigin:()=>u,rows:()=>y}),function(t){t.CORNER="corner",t.CENTER="center"}(t||(t={}));var e,o={Rectangle:t.CORNER,Ellipse:t.CENTER},i=function(t){o.Ellipse=t},u=function(t){o.Rectangle=t};!function(t){t[t.RECTANGLE=0]="RECTANGLE",t[t.ELLIPSE=1]="ELLIPSE"}(e||(e={}));var c=function(t,n){this.x=t,this.y=n},f=function(){function n(t,n,r,o,i){this.points=[[]],0===t&&(t=1,console.warn("Cannot create a grid with 0 columns, cols defaults to 1")),0===n&&(n=1,console.warn("Cannot create a grid with 0 rows, rows defaults to 1")),i===e.ELLIPSE?this.initEllipseGrid(t,n,r,o):this.initRectangleGrid(t,n,r,o)}return n.prototype.initRectangleGrid=function(n,r,e,i){var u=e/(n-1),f=i/(r-1),s=0,p=0;o.Rectangle===t.CENTER&&(s=-e/2,p=-i/2);for(var a=0;a<n;a++){this.points[a]=[];for(var l=0;l<r;l++)this.points[a][l]=new c(a*u+s,l*f+p)}},n.prototype.initEllipseGrid=function(n,r,e,i){var u=i/r,f=e/r,s=2*Math.PI/n,p=0,a=0;o.Ellipse===t.CORNER&&(p=e/2,a=i/2);for(var l=0;l<n;l++){this.points[l]=[];for(var h=l*s,d=r;d>=1;d--){var y=d*u,E=d*f/2*Math.cos(h),g=y/2*Math.sin(h);this.points[l][d-1]=new c(E+p,g+a)}}},n.prototype.get=function(){return this.points},n.prototype.set=function(t){this.points=t},n.prototype.getPoint=function(t,n){return this.points[t][n]},n.prototype.getFlat=function(){return this.points.reduce((function(t,n){return t.concat(n)}),[])},n.prototype.draw=function(t,n){return this.points.forEach((function(r,e){return r.forEach((function(r,o){n&&!n(r,e,o)||t(r,e,o)}))})),this},n.prototype.translate=function(t,n,r){return this.points.forEach((function(e,o){return e.forEach((function(e,i){r&&!r(e,o,i)||(e.x+=t,e.y+=n)}))})),this},n.prototype.copy=function(){var t=new n(this.points.length,this.points[0].length,0,0),r=JSON.parse(JSON.stringify(this.points));return t.set(r),t},n}(),s=function(){return function(t,n,r){return n%2==0&&r%2==0}},p=function(){return function(t,n,r){return n%2!=0&&r%2!=0}},a=function(){return function(t,n,r){return n%2==0}},l=function(){return function(t,n,r){return n%2!=0}},h=function(){return function(t,n,r){return r%2==0}},d=function(){return function(t,n,r){return r%2!=0}},y=function(t,n){return function(r,e,o){return o>=t&&o<=n}},E=function(t,n){return function(r,e,o){return e>=t&&e<=n}},g=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return function(n,r,e){for(var o=0,i=t;o<i.length;o++)if(!(0,i[o])(n,r,e))return!1;return!0}},v=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return function(n,r,e){for(var o=0,i=t;o<i.length;o++)if((0,i[o])(n,r,e))return!0;return!1}},R=function(t){return function(n,r,e){return!t(n,r,e)}};return r})()}));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUNoQixJQUFzQixVQUFBc0MsRUFBQSxlQUNsQixJQUFJdkIsRUFEVSxNQUNBRyxFQUFPcEIsRUFBS0UsR0FBTSxPQUFPLEVBRTNDLE9BQU8sSUFJRndDLEVBQWdCLFNBQUN6QixHQUMxQixPQUFPLFNBQUNHLEVBQU9wQixFQUFLRSxHQUFRLE9BQUNlLEVBQVVHLEVBQU9wQixFQUFLRSxLIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcHJldHR5R3JpZC93ZWJwYWNrL3VuaXZlcnNhbE1vZHVsZURlZmluaXRpb24iLCJ3ZWJwYWNrOi8vcHJldHR5R3JpZC93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9wcmV0dHlHcmlkLy4vc3JjL2dsb2JhbHMudHMiLCJ3ZWJwYWNrOi8vcHJldHR5R3JpZC93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMiLCJ3ZWJwYWNrOi8vcHJldHR5R3JpZC93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kIiwid2VicGFjazovL3ByZXR0eUdyaWQvd2VicGFjay9ydW50aW1lL21ha2UgbmFtZXNwYWNlIG9iamVjdCIsIndlYnBhY2s6Ly9wcmV0dHlHcmlkLy4vc3JjL2dyaWQudHMiLCJ3ZWJwYWNrOi8vcHJldHR5R3JpZC8uL3NyYy9jb25kaXRpb25zLnRzIiwid2VicGFjazovL3ByZXR0eUdyaWQvLi9zcmMvb3BlcmF0b3JzLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiB3ZWJwYWNrVW5pdmVyc2FsTW9kdWxlRGVmaW5pdGlvbihyb290LCBmYWN0b3J5KSB7XG5cdGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgbW9kdWxlID09PSAnb2JqZWN0Jylcblx0XHRtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoKTtcblx0ZWxzZSBpZih0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpXG5cdFx0ZGVmaW5lKFtdLCBmYWN0b3J5KTtcblx0ZWxzZSBpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcpXG5cdFx0ZXhwb3J0c1tcInByZXR0eUdyaWRcIl0gPSBmYWN0b3J5KCk7XG5cdGVsc2Vcblx0XHRyb290W1wicHJldHR5R3JpZFwiXSA9IGZhY3RvcnkoKTtcbn0pKHRoaXMsIGZ1bmN0aW9uKCkge1xucmV0dXJuICIsIi8vIFRoZSByZXF1aXJlIHNjb3BlXG52YXIgX193ZWJwYWNrX3JlcXVpcmVfXyA9IHt9O1xuXG4iLCIvLyBleHBvcnQgdGhlIGdsb2JhbFxuXG4vLyBleHBvcnQgb3JpZ2lucyBlbnVtXG5leHBvcnQgZW51bSBTaGFwZU9yaWdpbiB7XG4gICAgQ09STkVSID0gJ2Nvcm5lcicsXG4gICAgQ0VOVEVSID0gJ2NlbnRlcicsXG59XG5cbi8vIHNoYXBlT3JpZ2luc1xuZXhwb3J0IHR5cGUgU2hhcGVPcmlnaW5zID0ge1xuICAgIFJlY3RhbmdsZTogU2hhcGVPcmlnaW47XG4gICAgRWxsaXBzZTogU2hhcGVPcmlnaW47XG59O1xuXG5leHBvcnQgY29uc3Qgc2hhcGVPcmlnaW5zOiBTaGFwZU9yaWdpbnMgPSB7XG4gICAgUmVjdGFuZ2xlOiBTaGFwZU9yaWdpbi5DT1JORVIsXG4gICAgRWxsaXBzZTogU2hhcGVPcmlnaW4uQ0VOVEVSLFxufTtcblxuLy8gc2V0dGVyc1xuZXhwb3J0IGNvbnN0IGVsbGlwc2VTaGFwZU9yaWdpbiA9IChvcmlnaW46IFNoYXBlT3JpZ2luKSA9PiB7XG4gICAgc2hhcGVPcmlnaW5zLkVsbGlwc2UgPSBvcmlnaW47XG59O1xuZXhwb3J0IGNvbnN0IHJlY3RhbmdsZVNoYXBlT3JpZ2luID0gKG9yaWdpbjogU2hhcGVPcmlnaW4pID0+IHtcbiAgICBzaGFwZU9yaWdpbnMuUmVjdGFuZ2xlID0gb3JpZ2luO1xufTtcbiIsIi8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb25zIGZvciBoYXJtb255IGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uZCA9IChleHBvcnRzLCBkZWZpbml0aW9uKSA9PiB7XG5cdGZvcih2YXIga2V5IGluIGRlZmluaXRpb24pIHtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZGVmaW5pdGlvbiwga2V5KSAmJiAhX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIGtleSkpIHtcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBkZWZpbml0aW9uW2tleV0gfSk7XG5cdFx0fVxuXHR9XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18ubyA9IChvYmosIHByb3ApID0+IChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKSkiLCIvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSAoZXhwb3J0cykgPT4ge1xuXHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcblx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcblx0fVxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xufTsiLCJpbXBvcnQgeyBDb25kaXRpb24gfSBmcm9tICcuL2NvbmRpdGlvbnMnO1xuaW1wb3J0IHsgc2hhcGVPcmlnaW5zLCBTaGFwZU9yaWdpbiB9IGZyb20gJy4vZ2xvYmFscyc7XG5cbmV4cG9ydCB0eXBlIEdyaWRGdW5jdGlvbiA9IChwb2ludDogR3JpZFBvaW50LCBjb2w/OiBudW1iZXIsIHJvdz86IG51bWJlcikgPT4gdm9pZDtcblxuLyoqXG4gKiBFbnVtIHVzZWQgdG8gZGV0ZXJtaW5lIHRoZSBncmlkIHNoYXBlIGluIHRoZSBbR3JpZF17QGxpbmsgI0dyaWR9IGNvbnN0cnVjdG9yLlxuICogVmFsdWVzOiBSRUNUQU5HTEUgb3IgRUxMSVBTRS5cbiAqIEByZWFkb25seVxuICogQGVudW0ge251bWJlcn1cbiAqL1xuZXhwb3J0IGVudW0gR3JpZFNoYXBlIHtcbiAgICBSRUNUQU5HTEUgPSAwLFxuICAgIEVMTElQU0UgPSAxLFxufVxuXG4vKipcbiAqIFJlcHJlc2VudCBhIHNpbmdsZSBwb2ludCBvbiB0aGUgZ3JpZC5cbiAqIEBjbGFzc1xuICogQG5hbWUgR3JpZFBvaW50XG4gKiBAcGFyYW0ge251bWJlcn0geCB0aGUgeCBjb29yZGluYXRlIG9mIHRoZSBwb2ludFxuICogQHBhcmFtIHtudW1iZXJ9IHkgdGhlIHggY29vcmRpbmF0ZSBvZiB0aGUgcG9pbnRcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSB4IHRoZSB4IGNvb3JkaW5hdGUgb2YgdGhlIHBvaW50XG4gKiBAcHJvcGVydHkge251bWJlcn0geSB0aGUgeCBjb29yZGluYXRlIG9mIHRoZSBwb2ludFxuICovXG5leHBvcnQgY2xhc3MgR3JpZFBvaW50IHtcbiAgICB4OiBudW1iZXI7XG4gICAgeTogbnVtYmVyO1xuICAgIGNvbnN0cnVjdG9yKHg6IG51bWJlciwgeTogbnVtYmVyKSB7XG4gICAgICAgIHRoaXMueCA9IHg7XG4gICAgICAgIHRoaXMueSA9IHk7XG4gICAgfVxufVxuXG4vKipcbiAqIFRoZSBtYWluIEdyaWQgY2xhc3MgY29udGFpbmluZyBhbGwgYSB0d28gZGltZW5zaW9uYWwgYXJyYXkgb2YgR3JpZFBvaW50cyBhbmQgbWV0aG9kcyB0byBtYW5pcHVsYXRlIHRoZSBHcmlkUG9pbnRzIG9uIGdyaWQuXG4gKiBAY2xhc3NcbiAqIEBuYW1lIEdyaWRcbiAqIEBwYXJhbSB7bnVtYmVyfSBjb2xzIHRoZSBhbW91bnQgb2YgY29sdW1ucyB0aGUgZ3JpZCBuZWVkcyB0byBjb250YWluXG4gKiBAcGFyYW0ge251bWJlcn0gcm93cyB0aGUgYW1vdW50IG9mIHJvd3MgdGhlIGdyaWQgbmVlZHMgdG8gY29udGFpblxuICogQHBhcmFtIHtudW1iZXJ9IHdpZHRoIHRoZSB3aWR0aCBvZiB0aGUgZ3JpZFxuICogQHBhcmFtIHtudW1iZXJ9IGhlaWdodCB0aGUgaGVpZ2h0IG9mIHRoZSBncmlkXG4gKiBAcGFyYW0ge0dyaWRTaGFwZX0gW3NoYXBlXSB0aGUgc2hhcGUgb2YgdGhlIGdyaWQgKFJFQ1RBTkdMRSBvciBFTExJUFNFKS4gRGVmYXVsdHMgdG8gYSByZWN0YW5ndWxhciBzaGFwZWQgZ3JpZC5cbiAqL1xuZXhwb3J0IGNsYXNzIEdyaWQge1xuICAgIHByaXZhdGUgcG9pbnRzOiBHcmlkUG9pbnRbXVtdID0gW1tdXTtcblxuICAgIC8qKlxuICAgICAqIEluc3RhbnRpYXRlcyBhIG5ldyAyIERpbWVuc2lvbmFsIEdyaWQuXG4gICAgICogVGhlIGhvcml6b250YWwgZGlzdGFuY2UgYmV0d2VlbiBlYWNoIGNvbHVtbjogd2lkdGggLyAoY29scyAtIDEpXG4gICAgICogVGhlIHZlcnRpY2FsIGRpc3RhbmNlIGJldHdlZW4gZWFjaCByb3cgOiBoZWlnaHQgLyAocm93cyAtIDEpXG4gXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoY29sczogbnVtYmVyLCByb3dzOiBudW1iZXIsIHdpZHRoOiBudW1iZXIsIGhlaWdodDogbnVtYmVyLCBzaGFwZT86IEdyaWRTaGFwZSkge1xuICAgICAgICBpZiAoY29scyA9PT0gMCkge1xuICAgICAgICAgICAgY29scyA9IDE7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oJ0Nhbm5vdCBjcmVhdGUgYSBncmlkIHdpdGggMCBjb2x1bW5zLCBjb2xzIGRlZmF1bHRzIHRvIDEnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChyb3dzID09PSAwKSB7XG4gICAgICAgICAgICByb3dzID0gMTtcbiAgICAgICAgICAgIGNvbnNvbGUud2FybignQ2Fubm90IGNyZWF0ZSBhIGdyaWQgd2l0aCAwIHJvd3MsIHJvd3MgZGVmYXVsdHMgdG8gMScpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gaW5pdGlhbGl6ZSBncmlkXG4gICAgICAgIGlmIChzaGFwZSA9PT0gR3JpZFNoYXBlLkVMTElQU0UpIHtcbiAgICAgICAgICAgIHRoaXMuaW5pdEVsbGlwc2VHcmlkKGNvbHMsIHJvd3MsIHdpZHRoLCBoZWlnaHQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gZGVmYXVsdCB0byByZWN0YW5nbGUgZ3JpZFxuICAgICAgICAgICAgdGhpcy5pbml0UmVjdGFuZ2xlR3JpZChjb2xzLCByb3dzLCB3aWR0aCwgaGVpZ2h0KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgaW5pdFJlY3RhbmdsZUdyaWQoY29sczogbnVtYmVyLCByb3dzOiBudW1iZXIsIHdpZHRoOiBudW1iZXIsIGhlaWdodDogbnVtYmVyKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IHN0ZXBDb2xzID0gd2lkdGggLyAoY29scyAtIDEpO1xuICAgICAgICBjb25zdCBzdGVwUm93cyA9IGhlaWdodCAvIChyb3dzIC0gMSk7XG5cbiAgICAgICAgLy8gRGVmYXVsdHMgdG8gQ29ybmVyIG9yaWdpblxuICAgICAgICBsZXQgb3JpZ2luT2Zmc2V0WCA9IDAsXG4gICAgICAgICAgICBvcmlnaW5PZmZzZXRZID0gMDtcbiAgICAgICAgaWYgKHNoYXBlT3JpZ2lucy5SZWN0YW5nbGUgPT09IFNoYXBlT3JpZ2luLkNFTlRFUikge1xuICAgICAgICAgICAgb3JpZ2luT2Zmc2V0WCA9IC13aWR0aCAvIDI7XG4gICAgICAgICAgICBvcmlnaW5PZmZzZXRZID0gLWhlaWdodCAvIDI7XG4gICAgICAgIH1cblxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNvbHM7IGkrKykge1xuICAgICAgICAgICAgdGhpcy5wb2ludHNbaV0gPSBbXTtcbiAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgcm93czsgaisrKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wb2ludHNbaV1bal0gPSBuZXcgR3JpZFBvaW50KGkgKiBzdGVwQ29scyArIG9yaWdpbk9mZnNldFgsIGogKiBzdGVwUm93cyArIG9yaWdpbk9mZnNldFkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBpbml0RWxsaXBzZUdyaWQoY29sczogbnVtYmVyLCByb3dzOiBudW1iZXIsIHdpZHRoOiBudW1iZXIsIGhlaWdodDogbnVtYmVyKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IGhlaWdodFN0ZXAgPSBoZWlnaHQgLyByb3dzO1xuICAgICAgICBjb25zdCB3aWR0aFN0ZXAgPSB3aWR0aCAvIHJvd3M7XG4gICAgICAgIGNvbnN0IHJhZGlhbFN0ZXAgPSAoTWF0aC5QSSAqIDIpIC8gY29scztcblxuICAgICAgICAvLyBEZWZhdWx0cyB0byBDZW50ZXIgb3JpZ2luXG4gICAgICAgIGxldCBvcmlnaW5PZmZzZXRYID0gMCxcbiAgICAgICAgICAgIG9yaWdpbk9mZnNldFkgPSAwO1xuICAgICAgICBpZiAoc2hhcGVPcmlnaW5zLkVsbGlwc2UgPT09IFNoYXBlT3JpZ2luLkNPUk5FUikge1xuICAgICAgICAgICAgb3JpZ2luT2Zmc2V0WCA9IHdpZHRoIC8gMjtcbiAgICAgICAgICAgIG9yaWdpbk9mZnNldFkgPSBoZWlnaHQgLyAyO1xuICAgICAgICB9XG5cbiAgICAgICAgZm9yIChsZXQgY29sID0gMDsgY29sIDwgY29sczsgY29sKyspIHtcbiAgICAgICAgICAgIHRoaXMucG9pbnRzW2NvbF0gPSBbXTtcbiAgICAgICAgICAgIGNvbnN0IHRoZXRhID0gY29sICogcmFkaWFsU3RlcDtcblxuICAgICAgICAgICAgZm9yIChsZXQgcm93ID0gcm93czsgcm93ID49IDE7IHJvdy0tKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmluZ1dpZHRoID0gcm93ICogd2lkdGhTdGVwO1xuICAgICAgICAgICAgICAgIGNvbnN0IHJpbmdIZWlnaHQgPSByb3cgKiBoZWlnaHRTdGVwO1xuXG4gICAgICAgICAgICAgICAgbGV0IHBvaW50WCA9IChyaW5nV2lkdGggLyAyKSAqIE1hdGguY29zKHRoZXRhKTtcbiAgICAgICAgICAgICAgICBsZXQgcG9pbnRZID0gKHJpbmdIZWlnaHQgLyAyKSAqIE1hdGguc2luKHRoZXRhKTtcblxuICAgICAgICAgICAgICAgIHRoaXMucG9pbnRzW2NvbF1bcm93IC0gMV0gPSBuZXcgR3JpZFBvaW50KHBvaW50WCArIG9yaWdpbk9mZnNldFgsIHBvaW50WSArIG9yaWdpbk9mZnNldFkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0IGFsbCB0aGUgY3VycmVudCBwb2ludHMgb24gdGhlIGdyaWRcbiAgICAgKiB3YXJuaW5nOiBnZXRzIHRoZSBwb2ludHMgYXJyYXkgYnkgcmVmZXJlbmNlLiBDaGFuZ2VzIHRvIGluZGl2aWR1YWwgcG9pbnRzIHdpbGwgYmUgcmVmbGVjdGVkIGluIHRoZSBvcmlnaW5hbCBncmlkIG9iamVjdC5cbiAgICAgKiBUbyBnZXQgYSBkZWVwIGNvcHkgdXNlIGdyaWQuY29weSgpLiBlZy4gZ3JpZC5jb3B5LmdldCgpXG4gICAgICogXG4gICAgICogQG1ldGhvZFxuICAgICAqIEBuYW1lIGdldFxuICAgICAqIEByZXR1cm5zIHtHcmlkUG9pbnRbXVtdfVxuICAgICAqXG5cbiAgICAgKi9cbiAgICBnZXQoKTogR3JpZFBvaW50W11bXSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBvaW50cztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXBsYWNlcyBhbGwgdGhlIGN1cnJlbnQgcG9pbnRzIG9uIHRoZSBncmlkXG4gICAgICogPGI+IHdhcm5pbmc6IHNldHMgYSByZWZlcmVuY2UgdG8gdGhlIHByb3ZpZGVkIHBvaW50cy4gQ2hhbmdlcyBpbiBtYWRlIGJ5IHRoaXMgZ3JpZCBvYmplY3QgdG8gdGhlIHBvaW50cyB3aWxsIGJlIHJlZmxlY3RlZCBpbiB0aGUgcHJvdmlkZWQgcG9pbnRzIGFycmF5LiA8L2I+XG4gICAgICogQG1ldGhvZFxuICAgICAqIEBuYW1lIHNldFxuICAgICAqXG4gICAgICogQHJldHVybnMge3ZvaWR9XG4gICAgICovXG4gICAgc2V0KHBvaW50czogR3JpZFBvaW50W11bXSk6IHZvaWQge1xuICAgICAgICAvLyBUT0RPIHNldCBhIGRlZXAgY29weSBtYWtlcyBtb3JlIHNlbmNlPyBvciBtYWtlIGl0IG9wdGlvbmFsIGFuZCBwcm92aWRlIGEgZGVlcCBjb3B5IGhlbHBlciBmdW5jdGlvblxuICAgICAgICB0aGlzLnBvaW50cyA9IHBvaW50cztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXRzIGEgcG9pbnQgZnJvbSBmcm9tIGluZGVjZXMgW2NvbCwgcm93XVxuICAgICAqIEBtZXRob2RcbiAgICAgKiBAbmFtZSBnZXRQb2ludFxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBjb2wgLSB0aGUgY29sIGluZGV4XG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHJvdyAtIHRoZSByb3cgaW5kZXhcbiAgICAgKiBAcmV0dXJucyB7R3JpZFBvaW50fVxuICAgICAqL1xuXG4gICAgZ2V0UG9pbnQoY29sOiBudW1iZXIsIHJvdzogbnVtYmVyKTogR3JpZFBvaW50IHtcbiAgICAgICAgcmV0dXJuIHRoaXMucG9pbnRzW2NvbF1bcm93XTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiByZXR1cm5zIGEgb25lIGRpbWVuc2lvbmFsIGFycmF5IG9mIEdyaWRQb2ludHMgb2YgdGhlIGdyaWQuIE9uZSBjb2x1bW4gcHVzaGVkIGFmdGVyIHRoZSBvdGhlci5cbiAgICAgKiBAbWV0aG9kXG4gICAgICogQG5hbWUgZ2V0RmxhdFxuICAgICAqIEB0eXBlIHtHcmlkUG9pbnRbXX1cbiAgICAgKi9cbiAgICBnZXRGbGF0KCk6IEdyaWRQb2ludFtdIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucG9pbnRzLnJlZHVjZSgoYWNjLCB2YWwpID0+IGFjYy5jb25jYXQodmFsKSwgW10pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIExvb3BzIG92ZXIgdGhlIHBvaW50cyBpbiB0aGUgZ3JpZCwgcGFzc2luZyBlYWNoIHBvaW50IHRvIHRoZSBwcm92aWRlZCBmdW5jIHBhcmFtZXRlclxuICAgICAqIFByb3ZpZGUgYSBkcmF3aW5nIGZ1bmN0aW9uXG4gICAgICogQG1ldGhvZFxuICAgICAqIEBuYW1lIGRyYXdcbiAgICAgKiBAcGFyYW0ge0dyaWRGdW5jdGlvbn0gZnVuYyAtIGEgZnVuY3Rpb24gdGhhdCBoYW5kbGVzIGRyYXdpbmcgb2YgZWFjaCBpbmRpdmlkdWFsIHBvaW50XG4gICAgICogQHBhcmFtIHtDb25kaXRpb259IGNvbmRpdGlvbiAtIGFuIG9wdGlvbmFsIGNvbmRpdGlvbiBmb3Igd2hpY2ggcG9pbnRzIHRvIGRyYXdcbiAgICAgKiBAcmV0dXJucyB7IEdyaWQgfSByZXR1cm5zIEB0aGlzIEdyaWQgT2JqZWN0LiBVc2VkIGZvciBjaGFpbmluZyBHcmlkIG1ldGhvZHNcbiAgICAgKi9cbiAgICBkcmF3KGZ1bmM6IEdyaWRGdW5jdGlvbiwgY29uZGl0aW9uPzogQ29uZGl0aW9uKTogR3JpZCB7XG4gICAgICAgIHRoaXMucG9pbnRzLmZvckVhY2goKGNvbCwgY29sSW5kZXgpID0+XG4gICAgICAgICAgICBjb2wuZm9yRWFjaCgocG9pbnQsIHJvd0luZGV4KSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKCEhY29uZGl0aW9uICYmICFjb25kaXRpb24ocG9pbnQsIGNvbEluZGV4LCByb3dJbmRleCkpIHJldHVybjtcbiAgICAgICAgICAgICAgICBmdW5jKHBvaW50LCBjb2xJbmRleCwgcm93SW5kZXgpO1xuICAgICAgICAgICAgfSksXG4gICAgICAgICk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRyYW5zbGF0ZXMgdGhlIGVudGlyZSBncmlkIGJ5IHggZW4geSBjb29yZGluYXRlc1xuICAgICAqIEBtZXRob2RcbiAgICAgKiBAbmFtZSB0cmFuc2xhdGVcbiAgICAgKiBAcGFyYW0ge251bWJlcn0geCAtIHRoZSB4IGNvb3JkaW5hdGVzIHRvIHRyYW5zbGF0ZSB0aGUgcG9pbnRzIHdpdGhcbiAgICAgKiBAcGFyYW0ge251bWJlcn0geSAtIHRoZSB5IGNvb3JkaW5hdGVzIHRvIHRyYW5zbGF0ZSB0aGUgcG9pbnRzIHdpdGhcbiAgICAgKiBAcGFyYW0ge0NvbmRpdGlvbn0gW2NvbmRpdGlvbl0gLSBhbiBvcHRpb25hbCBjb25kaXRpb24gZm9yIHdoaWNoIHBvaW50cyB0byB0cmFuc2xhdGVcbiAgICAgKlxuICAgICAqIEByZXR1cm5zIHsgR3JpZCB9IHJldHVybnMgQHRoaXMgR3JpZCBPYmplY3QuIFVzZWQgZm9yIGNoYWluaW5nIEdyaWQgbWV0aG9kc1xuICAgICAqL1xuICAgIHRyYW5zbGF0ZSh4OiBudW1iZXIsIHk6IG51bWJlciwgY29uZGl0aW9uPzogQ29uZGl0aW9uKTogR3JpZCB7XG4gICAgICAgIHRoaXMucG9pbnRzLmZvckVhY2goKGNvbCwgY29sSW5kZXgpID0+XG4gICAgICAgICAgICBjb2wuZm9yRWFjaCgocG9pbnQsIHJvd0luZGV4KSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKCEhY29uZGl0aW9uICYmICFjb25kaXRpb24ocG9pbnQsIGNvbEluZGV4LCByb3dJbmRleCkpIHJldHVybjtcbiAgICAgICAgICAgICAgICBwb2ludC54ICs9IHg7XG4gICAgICAgICAgICAgICAgcG9pbnQueSArPSB5O1xuICAgICAgICAgICAgfSksXG4gICAgICAgICk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBkZWVwIGNvcHkgb2YgdGhlIGN1cnJlbnQgZ3JpZCBvYmplY3RcbiAgICAgKiBAbWV0aG9kXG4gICAgICogQG5hbWUgY29weVxuICAgICAqIEByZXR1cm5zIHsgR3JpZCB9IGEgbmV3IGluc3RhbmNlIG9mIEdyaWQgb2Ygd2l0aCB0aGUgc2FtZSBjb29yZGluYXRlIHZhbHVlcyBhcyBAdGhpcyBHcmlkXG4gICAgICovXG4gICAgY29weSgpOiBHcmlkIHtcbiAgICAgICAgY29uc3QgY29scyA9IHRoaXMucG9pbnRzLmxlbmd0aDtcbiAgICAgICAgLy8gVE9ETyB0YWtlIGludG8gYWNjb3VudCBwb3NpYmlsaXR5IG9mIG1vZGlmaWVkIHJvd1xuICAgICAgICBjb25zdCByb3dzID0gdGhpcy5wb2ludHNbMF0ubGVuZ3RoO1xuXG4gICAgICAgIC8vIFdpZHRoIGFuZCBoZWlnaHQgb2YgZ3JpZCBkbyBub3QgbWF0dGVyLCB0aGVzZSB3aWxsIGdldCBzZXRcbiAgICAgICAgY29uc3QgY29waWVkR3JpZCA9IG5ldyBHcmlkKGNvbHMsIHJvd3MsIDAsIDApO1xuICAgICAgICBjb25zdCBwb2ludHNEZWVwQ29weTogR3JpZFBvaW50W11bXSA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodGhpcy5wb2ludHMpKTtcbiAgICAgICAgY29waWVkR3JpZC5zZXQocG9pbnRzRGVlcENvcHkpO1xuXG4gICAgICAgIHJldHVybiBjb3BpZWRHcmlkO1xuICAgIH1cblxuICAgIC8qIFxuICAgIGdldFNlY3Rpb24oc3RhcnRDb2w6IG51bWJlciwgZW5kQ29sOiBudW1iZXIsIHN0YXJ0Um93OiBudW1iZXIsIGVuZFJvdzogbnVtYmVyKTogR3JpZCB7XG4gICAgICAgIGNvbnN0IHNsaWNlID0gdGhpcy5wb2ludHMuc2xpY2Uoc3RhcnRDb2wsIGVuZENvbCArIDEpLm1hcCgoaSkgPT4gaS5zbGljZShzdGFydFJvdywgZW5kUm93ICsgMSkpO1xuICAgICAgICBjb25zdCBncmlkRnJvbVNsaWNlID0gbmV3IEdyaWQoc2xpY2VbMF0ubGVuZ3RoLCBzbGljZS5sZW5ndGgsIDAsIDApO1xuICAgICAgICBncmlkRnJvbVNsaWNlLnNldChzbGljZSk7XG4gICAgICAgIHJldHVybiBncmlkRnJvbVNsaWNlO1xuICAgIH1cbiAgICAqL1xufVxuIiwiaW1wb3J0IHsgR3JpZFBvaW50IH0gZnJvbSAnLi9ncmlkJztcblxuZXhwb3J0IHR5cGUgQ29uZGl0aW9uID0gKHBvaW50OiBHcmlkUG9pbnQsIGNvbD86IG51bWJlciwgcm93PzogbnVtYmVyKSA9PiBib29sZWFuO1xuXG5leHBvcnQgdHlwZSBDb25kaXRpb25DcmVhdG9yID0gKC4uLmFyZ3M6IGFueVtdKSA9PiBDb25kaXRpb247XG5cbmV4cG9ydCBjb25zdCBhbGw6IENvbmRpdGlvbkNyZWF0b3IgPSAoKTogQ29uZGl0aW9uID0+IChwb2ludCwgY29sLCByb3cpID0+IHRydWU7XG5cbmV4cG9ydCBjb25zdCBldmVuOiBDb25kaXRpb25DcmVhdG9yID0gKCk6IENvbmRpdGlvbiA9PiAocG9pbnQsIGNvbCwgcm93KSA9PiBjb2wgJSAyID09PSAwICYmIHJvdyAlIDIgPT09IDA7XG5cbmV4cG9ydCBjb25zdCBvZGQ6IENvbmRpdGlvbkNyZWF0b3IgPSAoKTogQ29uZGl0aW9uID0+IChwb2ludCwgY29sLCByb3cpID0+IGNvbCAlIDIgIT09IDAgJiYgcm93ICUgMiAhPT0gMDtcblxuZXhwb3J0IGNvbnN0IGV2ZW5Db2xzOiBDb25kaXRpb25DcmVhdG9yID0gKCk6IENvbmRpdGlvbiA9PiAocG9pbnQsIGNvbCwgcm93KSA9PiBjb2wgJSAyID09PSAwO1xuXG5leHBvcnQgY29uc3Qgb2RkQ29sczogQ29uZGl0aW9uQ3JlYXRvciA9ICgpOiBDb25kaXRpb24gPT4gKHBvaW50LCBjb2wsIHJvdykgPT4gY29sICUgMiAhPT0gMDtcblxuZXhwb3J0IGNvbnN0IGV2ZW5Sb3dzOiBDb25kaXRpb25DcmVhdG9yID0gKCk6IENvbmRpdGlvbiA9PiAocG9pbnQsIGNvbCwgcm93KSA9PiByb3cgJSAyID09PSAwO1xuXG5leHBvcnQgY29uc3Qgb2RkUm93czogQ29uZGl0aW9uQ3JlYXRvciA9ICgpOiBDb25kaXRpb24gPT4gKHBvaW50LCBjb2wsIHJvdykgPT4gcm93ICUgMiAhPT0gMDtcblxuZXhwb3J0IGNvbnN0IHJvd3MgPVxuICAgIChzdGFydDogbnVtYmVyLCBlbmQ6IG51bWJlcik6IENvbmRpdGlvbiA9PlxuICAgIChwb2ludCwgY29sLCByb3cpID0+IHtcbiAgICAgICAgcmV0dXJuIHJvdyA+PSBzdGFydCAmJiByb3cgPD0gZW5kO1xuICAgIH07XG5cbmV4cG9ydCBjb25zdCBjb2xzID1cbiAgICAoc3RhcnQ6IG51bWJlciwgZW5kOiBudW1iZXIpOiBDb25kaXRpb24gPT5cbiAgICAocG9pbnQsIGNvbCwgcm93KSA9PiB7XG4gICAgICAgIHJldHVybiBjb2wgPj0gc3RhcnQgJiYgY29sIDw9IGVuZDtcbiAgICB9O1xuIiwiaW1wb3J0IHsgQ29uZGl0aW9uIH0gZnJvbSAnLi9jb25kaXRpb25zJztcblxuZXhwb3J0IHR5cGUgT3BlcmF0b3IgPSAoLi4uY29uZGl0aW9uczogQ29uZGl0aW9uW10pID0+IENvbmRpdGlvbjtcblxuZXhwb3J0IGNvbnN0IGFuZDogT3BlcmF0b3IgPSAoLi4uY29uZGl0aW9uczogQ29uZGl0aW9uW10pID0+IHtcbiAgICByZXR1cm4gKHBvaW50LCBjb2wsIHJvdykgPT4ge1xuICAgICAgICBmb3IgKGxldCBjb25kaXRpb24gb2YgY29uZGl0aW9ucykge1xuICAgICAgICAgICAgaWYgKCFjb25kaXRpb24ocG9pbnQsIGNvbCwgcm93KSkgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH07XG59O1xuXG5leHBvcnQgY29uc3Qgb3I6IE9wZXJhdG9yID0gKC4uLmNvbmRpdGlvbnM6IENvbmRpdGlvbltdKSA9PiB7XG4gICAgcmV0dXJuIChwb2ludCwgY29sLCByb3cpID0+IHtcbiAgICAgICAgZm9yIChsZXQgY29uZGl0aW9uIG9mIGNvbmRpdGlvbnMpIHtcbiAgICAgICAgICAgIGlmIChjb25kaXRpb24ocG9pbnQsIGNvbCwgcm93KSkgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH07XG59O1xuXG5leHBvcnQgY29uc3Qgbm90OiBPcGVyYXRvciA9IChjb25kaXRpb246IENvbmRpdGlvbikgPT4ge1xuICAgIHJldHVybiAocG9pbnQsIGNvbCwgcm93KSA9PiAhY29uZGl0aW9uKHBvaW50LCBjb2wsIHJvdyk7XG59O1xuIl0sIm5hbWVzIjpbInJvb3QiLCJmYWN0b3J5IiwiZXhwb3J0cyIsIm1vZHVsZSIsImRlZmluZSIsImFtZCIsInRoaXMiLCJTaGFwZU9yaWdpbiIsIl9fd2VicGFja19yZXF1aXJlX18iLCJkZWZpbml0aW9uIiwia2V5IiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsIm9iaiIsInByb3AiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwiR3JpZFNoYXBlIiwic2hhcGVPcmlnaW5zIiwiUmVjdGFuZ2xlIiwiQ09STkVSIiwiRWxsaXBzZSIsIkNFTlRFUiIsImVsbGlwc2VTaGFwZU9yaWdpbiIsIm9yaWdpbiIsInJlY3RhbmdsZVNoYXBlT3JpZ2luIiwieCIsInkiLCJjb2xzIiwicm93cyIsIndpZHRoIiwiaGVpZ2h0Iiwic2hhcGUiLCJwb2ludHMiLCJjb25zb2xlIiwid2FybiIsIkVMTElQU0UiLCJpbml0RWxsaXBzZUdyaWQiLCJpbml0UmVjdGFuZ2xlR3JpZCIsInN0ZXBDb2xzIiwic3RlcFJvd3MiLCJvcmlnaW5PZmZzZXRYIiwib3JpZ2luT2Zmc2V0WSIsImkiLCJqIiwiR3JpZFBvaW50IiwiaGVpZ2h0U3RlcCIsIndpZHRoU3RlcCIsInJhZGlhbFN0ZXAiLCJNYXRoIiwiUEkiLCJjb2wiLCJ0aGV0YSIsInJvdyIsInJpbmdIZWlnaHQiLCJwb2ludFgiLCJjb3MiLCJwb2ludFkiLCJzaW4iLCJzZXQiLCJnZXRQb2ludCIsImdldEZsYXQiLCJyZWR1Y2UiLCJhY2MiLCJ2YWwiLCJjb25jYXQiLCJkcmF3IiwiZnVuYyIsImNvbmRpdGlvbiIsImZvckVhY2giLCJjb2xJbmRleCIsInBvaW50Iiwicm93SW5kZXgiLCJ0cmFuc2xhdGUiLCJjb3B5IiwiY29waWVkR3JpZCIsIkdyaWQiLCJsZW5ndGgiLCJwb2ludHNEZWVwQ29weSIsIkpTT04iLCJwYXJzZSIsInN0cmluZ2lmeSIsImV2ZW4iLCJvZGQiLCJldmVuQ29scyIsIm9kZENvbHMiLCJldmVuUm93cyIsIm9kZFJvd3MiLCJzdGFydCIsImVuZCIsImFuZCIsImNvbmRpdGlvbnMiLCJvciIsIm5vdCJdLCJzb3VyY2VSb290IjoiIn0=